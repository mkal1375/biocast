{"version":3,"sources":["webpack:///./src/templates/episode-page.js"],"names":["query","ExternalLink","link","className","href","url","target","rel","name","title","Sponsor","sponsor","svgLogo","dangerouslySetInnerHTML","__html","description","Heading","React","forwardRef","ref","icon","color","props","style","EpisodePage","data","pageContext","useState","showMore","setShowMore","readingTitleRef","useRef","episode","strapiEpisode","person","people","relatedPosts","edges","externalLinks","components","filter","component","componentType","typeName","sponsors","image","src","squareImage","childImageSharp","fixed","width","height","keywords","keyword","map","item","pushed","toPersianNumber","episodeNumber","personTagline","xmlns","viewBox","id","d","transform","fill","preserveAspectRatio","fluid","clipPath","key","podbeanEmbedCode","spotifyLink","applePodcastLink","castboxLink","googlePodcastLink","overcastLink","padding","right","left","text","source","fields","convertedText","escapeHtml","transformImageUri","uri","startsWith","process","IMAGE_BASE_URL","onClick","prev","current","scrollIntoView","length","class","backgroundColor","slice","post","node","to","slugify","toJalaliDate","Date","created_at","Tag","shownName","setShowLess"],"mappings":"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","file":"component---src-templates-episode-page-js-90461bebd988e87c016a.js","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\"\nimport { graphql, Link } from \"gatsby\"\nimport ReactMarkdown from \"react-markdown\"\nimport SEO from \"../components/seo\"\n\nimport {\n  Footer,\n  Container,\n  Section,\n  Header,\n  Icon,\n  Button,\n  App_ApplePodcast,\n  App_CastBox,\n  App_GooglePodcast,\n  App_Overcast,\n  App_Spotify,\n  ActionBarForArticle,\n} from \"../components/Lib\"\nimport { toPersianNumber, slugify, toJalaliDate } from \"../utils/helpers\"\n\nconst EpisodePage = ({ data, pageContext }) => {\n  const [showMore, setShowMore] = useState(false)\n  const readingTitleRef = useRef()\n  const episode = data.strapiEpisode\n  const person = data.strapiEpisode.people[0]\n  const relatedPosts = data.relatedPosts.edges\n  const externalLinks = episode.components.filter(\n    component => component?.componentType?.typeName == \"externalLink\"\n  )\n  const sponsors = episode.components.filter(\n    component => component?.componentType?.typeName == \"sponsor\"\n  )\n  function handleShowMore() {\n    setShowMore(prev => !prev)\n    readingTitleRef.current.scrollIntoView()\n  }\n\n  return (\n    <Container>\n      <SEO\n        title={`پادکست زندگینامه ${episode.title}، داستان و حواشی زندگی او`}\n        image={{\n          src: episode.squareImage.childImageSharp.fixed.src,\n          width: episode.squareImage.childImageSharp.fixed.width,\n          height: episode.squareImage.childImageSharp.fixed.height,\n        }}\n        description={episode.description}\n        keywords={episode.keyword.map(item => item.title)}\n      />\n      <Header pushed className=\"header__episode_page\" />\n      <section className=\"episode_page__header\">\n        <div className=\"episode_page__header__info\">\n          <div className=\"episode_page__number\">\n            {toPersianNumber(episode.episodeNumber)}\n          </div>\n          <h1 className=\"episode_page__title\">{episode.title}</h1>\n          <h2 className=\"episode_page__subtitle\">{episode.personTagline}</h2>\n        </div>\n        <svg\n          className=\"episode_page__main_image\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 687.192 650.407\"\n        >\n          <defs>\n            <clipPath id=\"a\">\n              <path\n                d=\"M196.536,51.445c39.985-68.594,139.026-68.594,179.011,0L557.812,364.12c40.3,69.128-9.532,155.942-89.505,155.942H103.777c-79.974,0-129.8-86.814-89.505-155.942Z\"\n                transform=\"matrix(-0.966, -0.259, 0.259, -0.966, 660.036, 801.234)\"\n                fill=\"#63a1a3\"\n              />\n            </clipPath>\n            <pattern\n              id=\"b\"\n              preserveAspectRatio=\"none\"\n              width=\"100%\"\n              height=\"100%\"\n            >\n              <image\n                preserveAspectRatio=\"xMidYMid slice\"\n                width=\"100%\"\n                href={episode.squareImage.childImageSharp.fluid.src}\n              />\n            </pattern>\n          </defs>\n          <g transform=\"translate(-107.446 -150.827)\" clipPath=\"url(#a)\">\n            <rect\n              width=\"572.708\"\n              height=\"809.929\"\n              transform=\"translate(204.464 70.934)\"\n              fill=\"url(#b)\"\n            />\n          </g>\n        </svg>\n      </section>\n      <Section className=\"episode_page__listen rounded-3\">\n        <div className=\"episode_page__wrapper\">\n          <Heading title=\"بشنویم\" icon=\"headphones\" />\n          <p className=\"episode_page__listen__description\">\n            {episode.description}\n          </p>\n          {externalLinks && (\n            <div className=\"episode_page__links\">\n              {externalLinks.map(link => (\n                <ExternalLink key={link.url} link={link} />\n              ))}\n            </div>\n          )}\n          <div\n            className=\"episode_page__player\"\n            dangerouslySetInnerHTML={{ __html: episode.podbeanEmbedCode }}\n          />\n          <div className=\"episode_page__apps\">\n            <div className=\"episode_page__apps__title\">از کجا بشنویم؟</div>\n            <div className=\"episode_page__apps__apps\">\n              {episode.spotifyLink && (\n                <a\n                  href={episode.spotifyLink}\n                  className=\"navigator\"\n                  target=\"_blank\"\n                >\n                  <App_Spotify />\n                </a>\n              )}\n              {episode.applePodcastLink && (\n                <a\n                  href={episode.applePodcastLink}\n                  className=\"navigator\"\n                  target=\"_blank\"\n                >\n                  <App_ApplePodcast />\n                </a>\n              )}\n              {episode.castboxLink && (\n                <a\n                  href={episode.castboxLink}\n                  className=\"navigator\"\n                  target=\"_blank\"\n                >\n                  <App_CastBox />\n                </a>\n              )}\n              {episode.googlePodcastLink && (\n                <a\n                  href={episode.googlePodcastLink}\n                  className=\"navigator\"\n                  target=\"_blank\"\n                >\n                  <App_GooglePodcast />\n                </a>\n              )}\n              {episode.overcastLink && (\n                <a\n                  href={episode.overcastLink}\n                  className=\"navigator\"\n                  target=\"_blank\"\n                >\n                  <App_Overcast />\n                </a>\n              )}\n            </div>\n          </div>\n          {sponsors &&\n            sponsors.map(sponsor => (\n              <Sponsor key={sponsor.name} sponsor={sponsor} />\n            ))}\n        </div>\n      </Section>\n      <Section\n        className=\"episode_page__read\"\n        padding={{ right: \"0\", left: \"0\" }}\n        ref={readingTitleRef}\n      >\n        <div\n          className={`episode_page__wrapper${showMore ? \" fixed-heading\" : \"\"}`}\n        >\n          <Heading title=\"بخوانیم\" icon=\"book_open\" color=\"secondary\" />\n        </div>\n        {episode.text && (\n          <>\n            <div>\n              <article\n                className={`article__content article__content--close${\n                  showMore ? \" article__content--open\" : \"\"\n                }`}\n              >\n                <ReactMarkdown\n                  source={episode.fields.convertedText}\n                  escapeHtml={false}\n                  transformImageUri={uri =>\n                    uri.startsWith(\"http\")\n                      ? uri\n                      : `${process.env.IMAGE_BASE_URL}${uri}`\n                  }\n                />\n              </article>\n              {!showMore && (\n                <div className=\"article__show_more\">\n                  <Button color=\"primary\" onClick={handleShowMore}>\n                    مطالعه بیشتر\n                  </Button>\n                </div>\n              )}\n            </div>\n          </>\n        )}\n      </Section>\n      {relatedPosts.length > 0 && (\n        <Section class=\"top-rounded-3\" backgroundColor=\"var(--lightgray)\">\n          <Heading title=\"نوشته‌های مرتبط\" icon=\"file_text\" color=\"gray\" />\n          <div className=\"episode_page__posts__links\">\n            {relatedPosts.slice(0, 5).map(({ node: post }) => (\n              <Link\n                key={post.title}\n                className=\"link episode_page__posts__link\"\n                to={`/blog/${slugify(post.title)}`}\n              >\n                <span>{post.title}</span> ✽{\" \"}\n                <span>{toJalaliDate(new Date(post.created_at))}</span>\n              </Link>\n            ))}\n            {relatedPosts.length > 0 && (\n              <Button\n                className=\"episode_page__posts__button\"\n                Tag=\"Link\"\n                to={`/blog/tag/${slugify(person.shownName)}`}\n              >\n                مشاهده همه نوشته‌های مرتبط با {person.shownName}\n              </Button>\n            )}\n          </div>\n        </Section>\n      )}\n      <Footer />\n      <ActionBarForArticle\n        showMore={showMore}\n        setShowLess={() => {\n          setShowMore(false)\n          {\n            readingTitleRef.current.scrollIntoView()\n          }\n        }}\n      />\n    </Container>\n  )\n}\n\nexport const query = graphql`\n  query($slug: String!, $people: [Int]!) {\n    strapiEpisode(fields: { slug: { eq: $slug } }) {\n      applePodcastLink\n      castboxLink\n      created_at\n      episodeNumber\n      googlePodcastLink\n      description\n\n      namlikLink\n      overcastLink\n      shenotoLink\n      spotifyLink\n      stitcherLink\n      text\n      title\n      podbeanEmbedCode\n      personTagline\n      people {\n        shownName\n      }\n      keyword {\n        title\n      }\n      fields {\n        slug\n        convertedText\n      }\n      components {\n        url\n        title\n        name\n        link\n        svgLogo\n        description\n        componentType {\n          typeName\n        }\n      }\n      squareImage {\n        childImageSharp {\n          fluid(quality: 100) {\n            src\n          }\n          fixed {\n            src\n            width\n            height\n          }\n        }\n      }\n    }\n    relatedPosts: allStrapiPost(\n      filter: { people: { elemMatch: { id: { in: $people } } } }\n    ) {\n      edges {\n        node {\n          title\n          created_at\n        }\n      }\n    }\n  }\n`\n\nconst ExternalLink = ({ link }) => {\n  return (\n    <a\n      className=\"external_link\"\n      href={link.url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      <Icon name=\"external_link\" />\n      <span>{link.title}</span>\n    </a>\n  )\n}\n\nconst Sponsor = ({ sponsor }) => {\n  return (\n    <a\n      href={sponsor.link}\n      className=\"episode_page__sponsor navigator\"\n      target=\"_blank\"\n      rel=\"sponsored\"\n    >\n      <header>\n        <div className=\"episode_page__sponsor__title\">{sponsor.title}</div>\n        {sponsor.svgLogo ? (\n          <div\n            className=\"episode_page__sponsor__logo\"\n            dangerouslySetInnerHTML={{ __html: sponsor.svgLogo }}\n          />\n        ) : (\n          <div className=\"episode_page__sponsor__name\">{sponsor.name}</div>\n        )}\n      </header>\n      {sponsor.description && (\n        <p className=\"episode_page__sponsor__description\">\n          {sponsor.description}\n        </p>\n      )}\n    </a>\n  )\n}\n\nexport const Heading = React.forwardRef(\n  ({ title, icon, color = \"primary\", ...props }, ref) => {\n    return (\n      <header\n        {...props}\n        ref={ref}\n        className=\"episode_page__heading\"\n        style={{ color: `var(--${color})` }}\n      >\n        <div className=\"episode_page__heading__wrapper\">\n          <Icon name={icon} />\n          <h4>{title}</h4>\n        </div>\n      </header>\n    )\n  }\n)\n\nexport default EpisodePage\n"],"sourceRoot":""}